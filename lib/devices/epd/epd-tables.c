#include "types.h"

const u8 epd_lut[90]={
  0x82,0x00,0x00,0x00,0xAA,0x00,0x00,0x00,
  0xAA,0xAA,0x00,0x00,0xAA,0xAA,0xAA,0x00,
  0x55,0xAA,0xAA,0x00,0x55,0x55,0x55,0x55,
  0xAA,0xAA,0xAA,0xAA,0x55,0x55,0x55,0x55,
  0xAA,0xAA,0xAA,0xAA,0x15,0x15,0x15,0x15,
  0x05,0x05,0x05,0x05,0x01,0x01,0x01,0x01,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x41,0x45,0xF1,0xFF,0x5F,0x55,0x01,0x00,
  0x00,0x00,
};

const u8 xbm1bpp_lookup[256 * 2] = {
  /* p = 0x00 */ 0xFF, 0xFF,
  /* p = 0x01 */ 0x3F, 0xFF,
  /* p = 0x02 */ 0xCF, 0xFF,
  /* p = 0x03 */ 0x0F, 0xFF,
  /* p = 0x04 */ 0xF3, 0xFF,
  /* p = 0x05 */ 0x33, 0xFF,
  /* p = 0x06 */ 0xC3, 0xFF,
  /* p = 0x07 */ 0x03, 0xFF,
  /* p = 0x08 */ 0xFC, 0xFF,
  /* p = 0x09 */ 0x3C, 0xFF,
  /* p = 0x0A */ 0xCC, 0xFF,
  /* p = 0x0B */ 0x0C, 0xFF,
  /* p = 0x0C */ 0xF0, 0xFF,
  /* p = 0x0D */ 0x30, 0xFF,
  /* p = 0x0E */ 0xC0, 0xFF,
  /* p = 0x0F */ 0x00, 0xFF,
  /* p = 0x10 */ 0xFF, 0x3F,
  /* p = 0x11 */ 0x3F, 0x3F,
  /* p = 0x12 */ 0xCF, 0x3F,
  /* p = 0x13 */ 0x0F, 0x3F,
  /* p = 0x14 */ 0xF3, 0x3F,
  /* p = 0x15 */ 0x33, 0x3F,
  /* p = 0x16 */ 0xC3, 0x3F,
  /* p = 0x17 */ 0x03, 0x3F,
  /* p = 0x18 */ 0xFC, 0x3F,
  /* p = 0x19 */ 0x3C, 0x3F,
  /* p = 0x1A */ 0xCC, 0x3F,
  /* p = 0x1B */ 0x0C, 0x3F,
  /* p = 0x1C */ 0xF0, 0x3F,
  /* p = 0x1D */ 0x30, 0x3F,
  /* p = 0x1E */ 0xC0, 0x3F,
  /* p = 0x1F */ 0x00, 0x3F,
  /* p = 0x20 */ 0xFF, 0xCF,
  /* p = 0x21 */ 0x3F, 0xCF,
  /* p = 0x22 */ 0xCF, 0xCF,
  /* p = 0x23 */ 0x0F, 0xCF,
  /* p = 0x24 */ 0xF3, 0xCF,
  /* p = 0x25 */ 0x33, 0xCF,
  /* p = 0x26 */ 0xC3, 0xCF,
  /* p = 0x27 */ 0x03, 0xCF,
  /* p = 0x28 */ 0xFC, 0xCF,
  /* p = 0x29 */ 0x3C, 0xCF,
  /* p = 0x2A */ 0xCC, 0xCF,
  /* p = 0x2B */ 0x0C, 0xCF,
  /* p = 0x2C */ 0xF0, 0xCF,
  /* p = 0x2D */ 0x30, 0xCF,
  /* p = 0x2E */ 0xC0, 0xCF,
  /* p = 0x2F */ 0x00, 0xCF,
  /* p = 0x30 */ 0xFF, 0x0F,
  /* p = 0x31 */ 0x3F, 0x0F,
  /* p = 0x32 */ 0xCF, 0x0F,
  /* p = 0x33 */ 0x0F, 0x0F,
  /* p = 0x34 */ 0xF3, 0x0F,
  /* p = 0x35 */ 0x33, 0x0F,
  /* p = 0x36 */ 0xC3, 0x0F,
  /* p = 0x37 */ 0x03, 0x0F,
  /* p = 0x38 */ 0xFC, 0x0F,
  /* p = 0x39 */ 0x3C, 0x0F,
  /* p = 0x3A */ 0xCC, 0x0F,
  /* p = 0x3B */ 0x0C, 0x0F,
  /* p = 0x3C */ 0xF0, 0x0F,
  /* p = 0x3D */ 0x30, 0x0F,
  /* p = 0x3E */ 0xC0, 0x0F,
  /* p = 0x3F */ 0x00, 0x0F,
  /* p = 0x40 */ 0xFF, 0xF3,
  /* p = 0x41 */ 0x3F, 0xF3,
  /* p = 0x42 */ 0xCF, 0xF3,
  /* p = 0x43 */ 0x0F, 0xF3,
  /* p = 0x44 */ 0xF3, 0xF3,
  /* p = 0x45 */ 0x33, 0xF3,
  /* p = 0x46 */ 0xC3, 0xF3,
  /* p = 0x47 */ 0x03, 0xF3,
  /* p = 0x48 */ 0xFC, 0xF3,
  /* p = 0x49 */ 0x3C, 0xF3,
  /* p = 0x4A */ 0xCC, 0xF3,
  /* p = 0x4B */ 0x0C, 0xF3,
  /* p = 0x4C */ 0xF0, 0xF3,
  /* p = 0x4D */ 0x30, 0xF3,
  /* p = 0x4E */ 0xC0, 0xF3,
  /* p = 0x4F */ 0x00, 0xF3,
  /* p = 0x50 */ 0xFF, 0x33,
  /* p = 0x51 */ 0x3F, 0x33,
  /* p = 0x52 */ 0xCF, 0x33,
  /* p = 0x53 */ 0x0F, 0x33,
  /* p = 0x54 */ 0xF3, 0x33,
  /* p = 0x55 */ 0x33, 0x33,
  /* p = 0x56 */ 0xC3, 0x33,
  /* p = 0x57 */ 0x03, 0x33,
  /* p = 0x58 */ 0xFC, 0x33,
  /* p = 0x59 */ 0x3C, 0x33,
  /* p = 0x5A */ 0xCC, 0x33,
  /* p = 0x5B */ 0x0C, 0x33,
  /* p = 0x5C */ 0xF0, 0x33,
  /* p = 0x5D */ 0x30, 0x33,
  /* p = 0x5E */ 0xC0, 0x33,
  /* p = 0x5F */ 0x00, 0x33,
  /* p = 0x60 */ 0xFF, 0xC3,
  /* p = 0x61 */ 0x3F, 0xC3,
  /* p = 0x62 */ 0xCF, 0xC3,
  /* p = 0x63 */ 0x0F, 0xC3,
  /* p = 0x64 */ 0xF3, 0xC3,
  /* p = 0x65 */ 0x33, 0xC3,
  /* p = 0x66 */ 0xC3, 0xC3,
  /* p = 0x67 */ 0x03, 0xC3,
  /* p = 0x68 */ 0xFC, 0xC3,
  /* p = 0x69 */ 0x3C, 0xC3,
  /* p = 0x6A */ 0xCC, 0xC3,
  /* p = 0x6B */ 0x0C, 0xC3,
  /* p = 0x6C */ 0xF0, 0xC3,
  /* p = 0x6D */ 0x30, 0xC3,
  /* p = 0x6E */ 0xC0, 0xC3,
  /* p = 0x6F */ 0x00, 0xC3,
  /* p = 0x70 */ 0xFF, 0x03,
  /* p = 0x71 */ 0x3F, 0x03,
  /* p = 0x72 */ 0xCF, 0x03,
  /* p = 0x73 */ 0x0F, 0x03,
  /* p = 0x74 */ 0xF3, 0x03,
  /* p = 0x75 */ 0x33, 0x03,
  /* p = 0x76 */ 0xC3, 0x03,
  /* p = 0x77 */ 0x03, 0x03,
  /* p = 0x78 */ 0xFC, 0x03,
  /* p = 0x79 */ 0x3C, 0x03,
  /* p = 0x7A */ 0xCC, 0x03,
  /* p = 0x7B */ 0x0C, 0x03,
  /* p = 0x7C */ 0xF0, 0x03,
  /* p = 0x7D */ 0x30, 0x03,
  /* p = 0x7E */ 0xC0, 0x03,
  /* p = 0x7F */ 0x00, 0x03,
  /* p = 0x80 */ 0xFF, 0xFC,
  /* p = 0x81 */ 0x3F, 0xFC,
  /* p = 0x82 */ 0xCF, 0xFC,
  /* p = 0x83 */ 0x0F, 0xFC,
  /* p = 0x84 */ 0xF3, 0xFC,
  /* p = 0x85 */ 0x33, 0xFC,
  /* p = 0x86 */ 0xC3, 0xFC,
  /* p = 0x87 */ 0x03, 0xFC,
  /* p = 0x88 */ 0xFC, 0xFC,
  /* p = 0x89 */ 0x3C, 0xFC,
  /* p = 0x8A */ 0xCC, 0xFC,
  /* p = 0x8B */ 0x0C, 0xFC,
  /* p = 0x8C */ 0xF0, 0xFC,
  /* p = 0x8D */ 0x30, 0xFC,
  /* p = 0x8E */ 0xC0, 0xFC,
  /* p = 0x8F */ 0x00, 0xFC,
  /* p = 0x90 */ 0xFF, 0x3C,
  /* p = 0x91 */ 0x3F, 0x3C,
  /* p = 0x92 */ 0xCF, 0x3C,
  /* p = 0x93 */ 0x0F, 0x3C,
  /* p = 0x94 */ 0xF3, 0x3C,
  /* p = 0x95 */ 0x33, 0x3C,
  /* p = 0x96 */ 0xC3, 0x3C,
  /* p = 0x97 */ 0x03, 0x3C,
  /* p = 0x98 */ 0xFC, 0x3C,
  /* p = 0x99 */ 0x3C, 0x3C,
  /* p = 0x9A */ 0xCC, 0x3C,
  /* p = 0x9B */ 0x0C, 0x3C,
  /* p = 0x9C */ 0xF0, 0x3C,
  /* p = 0x9D */ 0x30, 0x3C,
  /* p = 0x9E */ 0xC0, 0x3C,
  /* p = 0x9F */ 0x00, 0x3C,
  /* p = 0xA0 */ 0xFF, 0xCC,
  /* p = 0xA1 */ 0x3F, 0xCC,
  /* p = 0xA2 */ 0xCF, 0xCC,
  /* p = 0xA3 */ 0x0F, 0xCC,
  /* p = 0xA4 */ 0xF3, 0xCC,
  /* p = 0xA5 */ 0x33, 0xCC,
  /* p = 0xA6 */ 0xC3, 0xCC,
  /* p = 0xA7 */ 0x03, 0xCC,
  /* p = 0xA8 */ 0xFC, 0xCC,
  /* p = 0xA9 */ 0x3C, 0xCC,
  /* p = 0xAA */ 0xCC, 0xCC,
  /* p = 0xAB */ 0x0C, 0xCC,
  /* p = 0xAC */ 0xF0, 0xCC,
  /* p = 0xAD */ 0x30, 0xCC,
  /* p = 0xAE */ 0xC0, 0xCC,
  /* p = 0xAF */ 0x00, 0xCC,
  /* p = 0xB0 */ 0xFF, 0x0C,
  /* p = 0xB1 */ 0x3F, 0x0C,
  /* p = 0xB2 */ 0xCF, 0x0C,
  /* p = 0xB3 */ 0x0F, 0x0C,
  /* p = 0xB4 */ 0xF3, 0x0C,
  /* p = 0xB5 */ 0x33, 0x0C,
  /* p = 0xB6 */ 0xC3, 0x0C,
  /* p = 0xB7 */ 0x03, 0x0C,
  /* p = 0xB8 */ 0xFC, 0x0C,
  /* p = 0xB9 */ 0x3C, 0x0C,
  /* p = 0xBA */ 0xCC, 0x0C,
  /* p = 0xBB */ 0x0C, 0x0C,
  /* p = 0xBC */ 0xF0, 0x0C,
  /* p = 0xBD */ 0x30, 0x0C,
  /* p = 0xBE */ 0xC0, 0x0C,
  /* p = 0xBF */ 0x00, 0x0C,
  /* p = 0xC0 */ 0xFF, 0xF0,
  /* p = 0xC1 */ 0x3F, 0xF0,
  /* p = 0xC2 */ 0xCF, 0xF0,
  /* p = 0xC3 */ 0x0F, 0xF0,
  /* p = 0xC4 */ 0xF3, 0xF0,
  /* p = 0xC5 */ 0x33, 0xF0,
  /* p = 0xC6 */ 0xC3, 0xF0,
  /* p = 0xC7 */ 0x03, 0xF0,
  /* p = 0xC8 */ 0xFC, 0xF0,
  /* p = 0xC9 */ 0x3C, 0xF0,
  /* p = 0xCA */ 0xCC, 0xF0,
  /* p = 0xCB */ 0x0C, 0xF0,
  /* p = 0xCC */ 0xF0, 0xF0,
  /* p = 0xCD */ 0x30, 0xF0,
  /* p = 0xCE */ 0xC0, 0xF0,
  /* p = 0xCF */ 0x00, 0xF0,
  /* p = 0xD0 */ 0xFF, 0x30,
  /* p = 0xD1 */ 0x3F, 0x30,
  /* p = 0xD2 */ 0xCF, 0x30,
  /* p = 0xD3 */ 0x0F, 0x30,
  /* p = 0xD4 */ 0xF3, 0x30,
  /* p = 0xD5 */ 0x33, 0x30,
  /* p = 0xD6 */ 0xC3, 0x30,
  /* p = 0xD7 */ 0x03, 0x30,
  /* p = 0xD8 */ 0xFC, 0x30,
  /* p = 0xD9 */ 0x3C, 0x30,
  /* p = 0xDA */ 0xCC, 0x30,
  /* p = 0xDB */ 0x0C, 0x30,
  /* p = 0xDC */ 0xF0, 0x30,
  /* p = 0xDD */ 0x30, 0x30,
  /* p = 0xDE */ 0xC0, 0x30,
  /* p = 0xDF */ 0x00, 0x30,
  /* p = 0xE0 */ 0xFF, 0xC0,
  /* p = 0xE1 */ 0x3F, 0xC0,
  /* p = 0xE2 */ 0xCF, 0xC0,
  /* p = 0xE3 */ 0x0F, 0xC0,
  /* p = 0xE4 */ 0xF3, 0xC0,
  /* p = 0xE5 */ 0x33, 0xC0,
  /* p = 0xE6 */ 0xC3, 0xC0,
  /* p = 0xE7 */ 0x03, 0xC0,
  /* p = 0xE8 */ 0xFC, 0xC0,
  /* p = 0xE9 */ 0x3C, 0xC0,
  /* p = 0xEA */ 0xCC, 0xC0,
  /* p = 0xEB */ 0x0C, 0xC0,
  /* p = 0xEC */ 0xF0, 0xC0,
  /* p = 0xED */ 0x30, 0xC0,
  /* p = 0xEE */ 0xC0, 0xC0,
  /* p = 0xEF */ 0x00, 0xC0,
  /* p = 0xF0 */ 0xFF, 0x00,
  /* p = 0xF1 */ 0x3F, 0x00,
  /* p = 0xF2 */ 0xCF, 0x00,
  /* p = 0xF3 */ 0x0F, 0x00,
  /* p = 0xF4 */ 0xF3, 0x00,
  /* p = 0xF5 */ 0x33, 0x00,
  /* p = 0xF6 */ 0xC3, 0x00,
  /* p = 0xF7 */ 0x03, 0x00,
  /* p = 0xF8 */ 0xFC, 0x00,
  /* p = 0xF9 */ 0x3C, 0x00,
  /* p = 0xFA */ 0xCC, 0x00,
  /* p = 0xFB */ 0x0C, 0x00,
  /* p = 0xFC */ 0xF0, 0x00,
  /* p = 0xFD */ 0x30, 0x00,
  /* p = 0xFE */ 0xC0, 0x00,
  /* p = 0xFF */ 0x00, 0x00,
};

// For historical purposes, an attempt to deconstruct the LUT.
// In epd.specification, these are denoted as VS[0-03] and TP[1].
// Their intent is to encode a waveform that expresses what sequence
// of charges to apply to the plates, depending on start and end states.
// What if each waveform is encoded as VS[t-se], where:
//   t: timebase unit of some sort
//   s: start pixel value
//   e: end pixel value
// There are two bits for each VS value, but the definitions are not provided. What about:
//   00: VCOM
//   01: VDH + VCOM
//   10: VDL + VCOM
//   11: Floating	
// And TP[t] denotes whether that timebase unit is skipped or not? Or perhaps it's
// the number of times to perform the corresponding voltage value.
// Corroborations:
//   * this EPD has 4 pixel values (2 bits per pixel)
//   * a datasheet for the SSD1675 EPD on Adafruit lists TP values as "timephase skips"
//   * ~7:40 in this video states that manufacturers use waveform LUTs to determine charge
//     applications: https://www.youtube.com/watch?v=MsbiO8EAsGw
static const u8 epd_lut2[90] = {
	// VS values
	0x82,0x00,0x00,0x00,
	0xAA,0x00,0x00,0x00,
	0xAA,0xAA,0x00,0x00,
	0xAA,0xAA,0xAA,0x00,
	0x55,0xAA,0xAA,0x00,
	0x55,0x55,0x55,0x55,
	0xAA,0xAA,0xAA,0xAA,
	0x55,0x55,0x55,0x55,
	0xAA,0xAA,0xAA,0xAA,
	0x15,0x15,0x15,0x15,
	0x05,0x05,0x05,0x05,
	0x01,0x01,0x01,0x01,
	0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,
	0x00,0x00,0x00,0x00,

	// TP values, 0-19:
	// 1 4 5 4 1 F F F F 5 5 5 1 0...
	0x41, // 0x41,
	0x45, // 0x45,
	0xF1, // 0xF1,
	0xFF, // 0xFF,
	0x5F, // 0x5F,
	0x55, // 0x55,
	0x01, // 0x01,
	0x00,
	0x00,
	0x00,
};
